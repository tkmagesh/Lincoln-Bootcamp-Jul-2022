0. In the EC2
    amazon-linux-extras install epel -y
    yum install python3-pip python3-devel python3-setuptools -y

1. Create an application folder with the app.py file
2. Create the virtual environment
    python3 -m venv venv
3. activate the venv
    source venv/bin/activate
4. install the dependencies
    pip install Flask
    pip install waitress

    
5. Install nginx
    sudo amazon-linux-extras install nginx1

6. add the custom configuration in the /etc/nginx/conf.d/myapp.conf file with the following contents
    server {
    listen 80 default_server;
    server_name _;
    access_log  /var/log/nginx/access.log;
    error_log  /var/log/nginx/error.log;

    location / {
        proxy_pass         http://127.0.0.1:8080/;
        proxy_redirect     off;

        proxy_set_header   Host                 $host;
        proxy_set_header   X-Real-IP            $remote_addr;
        proxy_set_header   X-Forwarded-For      $proxy_add_x_forwarded_for;
        proxy_set_header   X-Forwarded-Proto    $scheme;
    }
}

7. Start the nginx
    sudo systemctl start nginx

8. create a service file (/etc/systemd/system/myapp.service) for the application with the following
[Unit]
Description=Gunicorn daemon to serve my flaskapp
After=network.target
[Service]
User=ec2-user
Group=ec2-user
WorkingDirectory=/home/ec2-user/myapp
ExecStart=/home/ec2-user/myapp/venv/bin/python3 /home/ec2-user/myapp.py
[Install]
WantedBy=multi-user.target

9. start the application service
sudo systemctl start myapp





